{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '44648929-0a3ca09e28beb33e491a22410';\n\nexport async function fetchImages(searchTerm, currentPage) {\n  const url = 'https://pixabay.com/api/';\n  const params = {\n    key: API_KEY,\n    q: searchTerm,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: currentPage,\n    per_page: 15,\n  };\n\n  try {\n    const response = await axios.get(url, { params });\n\n    if (response.status !== 200) {\n      throw new Error(`HTTP error! Status: ${response.status}`);\n    }\n\n    const data = response.data;\n\n    return data.hits.map(image => ({\n      webformatURL: image.webformatURL,\n      largeImageURL: image.largeImageURL,\n      tags: image.tags,\n      likes: image.likes,\n      views: image.views,\n      comments: image.comments,\n      downloads: image.downloads,\n    }));\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n","export function renderGallery(images, append = false) {\n  const gallery = document.getElementById('gallery');\n  const markup = images\n    .map(\n      image => `\n    <div class=\"photo-card\">\n      <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n      </a>\n      <div class=\"info\">\n        <p class=\"info-item\">\n          <b>Likes</b> ${image.likes}\n        </p>\n        <p class=\"info-item\">\n          <b>Views</b> ${image.views}\n        </p>\n        <p class=\"info-item\">\n          <b>Comments</b> ${image.comments}\n        </p>\n        <p class=\"info-item\">\n          <b>Downloads</b> ${image.downloads}\n        </p>\n      </div>\n    </div>\n  `\n    )\n    .join('');\n\n  if (append) {\n    gallery.insertAdjacentHTML('beforeend', markup);\n  } else {\n    gallery.innerHTML = markup;\n  }\n}\n\nexport function clearGallery() {\n  const gallery = document.getElementById('gallery');\n  gallery.innerHTML = '';\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchImages } from './js/pixabay-api';\nimport { renderGallery, clearGallery } from './js/render-functions.js';\n\nconst form = document.getElementById('search-form');\nconst searchInput = document.getElementById('search-input');\nconst gallery = document.getElementById('gallery');\nconst loadingIndicator = document.querySelector('.loader');\nconst btnLoadMore = document.querySelector('.btn');\n\nlet searchTerm = '';\nlet currentPage = 1;\nlet maxPage = 1;\nconst perPage = 15;\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  searchTerm = searchInput.value.trim();\n\n  if (searchTerm === '') {\n    iziToast.error({\n      message: 'Please enter a search keyword.',\n    });\n    return;\n  }\n\n  clearGallery(gallery);\n  showLoadingIndicator();\n  hideLoadBtn();\n\n  try {\n    currentPage = 1;\n    const images = await fetchImages(searchTerm, currentPage);\n    maxPage = data.totalHits / perPage;\n\n    if (images.length === 0) {\n      iziToast.info({\n        message:\n          'Sorry, no images matching your search query were found. Please try again!',\n      });\n    } else {\n      renderGallery(images);\n      initializeLightbox();\n      searchInput.value = '';\n      showLoadBtn();\n    }\n  } catch (error) {\n    console.error('Error loading images:', error);\n    iziToast.error({\n      message: 'Failed to load images. Please try again later.',\n    });\n  }\n  hideLoadingIndicator();\n});\n\nbtnLoadMore.addEventListener('click', async () => {\n  currentPage++;\n  try {\n    showLoadingIndicator();\n    const images = await fetchImages(searchTerm, currentPage);\n\n    if (images.length > 0) {\n      renderGallery(images, true);\n      initializeLightbox();\n      updateMaxPage();\n    } else {\n      iziToast.info({\n        message: 'No more images found.',\n      });\n      hideLoadBtn();\n    }\n  } catch (error) {\n    console.error('Error loading more images:', error);\n    iziToast.error({\n      message: 'Failed to load more images. Please try again later.',\n    });\n  }\n  hideLoadingIndicator();\n});\n\nfunction showLoadingIndicator() {\n  loadingIndicator.classList.remove('hidden');\n}\n\nfunction hideLoadingIndicator() {\n  loadingIndicator.classList.add('hidden');\n}\n\nfunction initializeLightbox() {\n  const lightbox = new SimpleLightbox('.gallery a', {});\n  lightbox.refresh();\n}\n\nfunction showLoadBtn() {\n  btnLoadMore.classList.remove('hidden');\n}\nfunction hideLoadBtn() {\n  btnLoadMore.classList.add('hidden');\n}\n\nfunction updateMaxPage(totalHits, perPage) {\n  maxPage = Math.ceil(totalHits / perPage);\n\n  if (currentPage >= maxPage) {\n    iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n    hideLoadBtn();\n  } else {\n    showLoadBtn();\n  }\n}\n"],"names":["API_KEY","fetchImages","searchTerm","currentPage","url","params","response","axios","image","error","renderGallery","images","append","gallery","markup","clearGallery","form","searchInput","loadingIndicator","btnLoadMore","maxPage","perPage","event","iziToast","showLoadingIndicator","hideLoadBtn","initializeLightbox","showLoadBtn","hideLoadingIndicator","updateMaxPage","SimpleLightbox","totalHits"],"mappings":"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"}